<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>From The River To The Sea | A Living Resource for Palestine</title>
    <meta name="description" content="An interactive journey through the history, culture, and struggle of Palestine. A living resource for education, action, and solidarity.">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
<link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="styles.css">
</head>
<body class="w-full">

    <!-- SVG Container for the "River" Path -->
    <div id="svg-path-container">
        <svg width="100%" height="100%" xmlns="http://www.w3.org/2000/svg">
            <defs>
                <filter id="hand-drawn-filter">
                    <feTurbulence type="fractalNoise" baseFrequency="0.02" numOctaves="3" result="noise"/>
                    <feDisplacementMap in="SourceGraphic" in2="noise" scale="3" xChannelSelector="R" yChannelSelector="G"/>
                </filter>
            </defs>
            <path id="river-path" fill="none"/>
        </svg>
    </div>

    <div class="relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        
        <!-- Header Section -->
        <header id="header" class="min-h-screen flex flex-col justify-center items-center text-center py-20 relative z-10">
            <h1 class="text-6xl md:text-8xl text-white italics leading-tight tracking-tighter">
                From The River
            </h1>
            <p class="mt-6 text-xl md:text-2xl text-gray-400 max-w-3xl">
                A living archive of Palestinian history, culture, and the ongoing struggle for liberation. This is a journey of understanding.
            </p>
            <div class="mt-12 text-gray-500 animate-bounce">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M19 14l-7 7m0 0l-7-7m7 7V3" />
                </svg>
            </div>
        </header>
        
        <!-- Main Content Wrapper -->
        <div id="content-wrapper" class="py-20">

            <!-- Node 1: The Roots (Left) -->
            <section class="content-node node-container flex node-left mb-24 md:mb-32">
                <div class="w-full md:w-1/2 bg-black/20 backdrop-blur-md border border-gray-800 p-8 rounded-lg shadow-2xl">
                    <div class="node-image-container">
                        <img src="images/ancient-olive-tree.jpg" alt="An ancient, gnarled olive tree stands testament to deep roots and Palestinian steadfastness.">
                    </div>
                    <h2 class="font-serif text-4xl text-white mb-4">The Roots</h2>
                    <p class="text-gray-400 mb-6">Understand the historical and legal foundations of Palestine. This is where the story begins, in the soil and soul of a land and its people.</p>
                    <ul class="space-y-3">
                        <li><a href="https://101.visualizingpalestine.org/" class="resource-link" target="_blank" rel="noopener noreferrer">Palestine 101: A Visual History</a></li>
                        <li><a href="https://www.aljazeera.com/features/2017/5/23/the-nakba-did-not-start-or-end-in-1948" class="resource-link" target="_blank" rel="noopener noreferrer">The Nakba of 1948: An Ongoing Catastrophe</a></li>
                        <li><a href="https://decolonizepalestine.com/zionism/" class="resource-link" target="_blank" rel="noopener noreferrer">Defining Zionism as a Settler-Colonial Project</a></li>
                        <li><a href="https://www.un.org/unispal/history/" class="resource-link" target="_blank" rel="noopener noreferrer">Key UN Resolutions and International Law</a></li>
                    </ul>
                </div>
            </section>

            <!-- Node 2: Resistance (Right) -->
            <section class="content-node node-container flex node-right mb-24 md:mb-32">
                <div class="w-full md:w-1/2 bg-black/20 backdrop-blur-md border border-gray-800 p-8 rounded-lg shadow-2xl">
                    <div class="node-image-container">
                        <img src="images/resistance.jpg" alt="A protestor holds a Palestinian flag and a megaphone, vocally symbolizing active resistance.">
                    </div>
                    <h2 class="font-serif text-4xl text-white mb-4">The Resistance</h2>
                    <p class="text-gray-400 mb-6">Explore the many forms of Palestinian resistance, from popular uprisings and armed struggle to the enduring power of cultural and intellectual defiance.</p>
                    <ul class="space-y-3">
                        <li><a href="https://remix.aljazeera.com/aje/PalestineRemix/timeline_main.html" class="resource-link" target="_blank" rel="noopener noreferrer">Chronology of Intifadas: The People's Uprisings</a></li>
                        <li><a href="https://www.poetryfoundation.org/poets/mahmoud-darwish" class="resource-link" target="_blank" rel="noopener noreferrer">Literary Resistance: The Poetry of Mahmoud Darwish</a></li>
                        <li><a href="https://www.palquest.org/en/highlight/22198/sumud-steadfastness" class="resource-link" target="_blank" rel="noopener noreferrer">Sumud: The Art of Steadfastness</a></li>
                        <li><a href="https://bdsmovement.net/" class="resource-link" target="_blank" rel="noopener noreferrer">The Global Boycott, Divestment, Sanctions (BDS) Movement</a></li>
                    </ul>
                </div>
            </section>
            
            <!-- Node 3: The Culture (Left) -->
            <section class="content-node node-container flex node-left mb-24 md:mb-32">
                <div class="w-full md:w-1/2 bg-black/20 backdrop-blur-md border border-gray-800 p-8 rounded-lg shadow-2xl">
                    <div class="node-image-container">
                        <img src="images/palestinian-culture.jpg" alt="A man sells traditional Palestinian keffiyehs, a core symbol of cultural identity.">
                    </div>
                    <h2 class="font-serif text-4xl text-white mb-4">The Culture</h2>
                    <p class="text-gray-400 mb-6">Experience the richness of Palestinian life and identityâ€”a culture that thrives as a form of resistance itself, rooted in centuries of tradition and creativity.</p>
                    <ul class="space-y-3">
                        <li><a href="https://sustainablefoodtrust.org/news-views/a-taste-of-palestine-cultivating-resistance/" class="resource-link" target="_blank" rel="noopener noreferrer">Cuisine as Identity: A Taste of Palestine</a></li>
                        <li><a href="https://www.palestineinamerica.com/blog/untangledtatreez" class="resource-link" target="_blank" rel="noopener noreferrer">Tatreez: The Embroidery of a Nation's Story</a></li>
                        <li><a href="https://arabfilminstitute.org/palestinian-voices/" class="resource-link" target="_blank" rel="noopener noreferrer">Palestinian Cinema: Voices on Screen</a></li>
                        <li><a href="https://www.middleeasteye.net/discover/palestine-dabke-dance-keeps-culture-alive" class="resource-link" target="_blank" rel="noopener noreferrer">Music and Dabke: The Rhythms of a Movement</a></li>
                    </ul>
                </div>
            </section>

            <!-- Node 4: The Action (Right) -->
            <section class="content-node node-container flex node-right mb-24 md:mb-32">
                <div class="w-full md:w-1/2 bg-black/20 backdrop-blur-md border border-gray-800 p-8 rounded-lg shadow-2xl">
                    <div class="node-image-container">
                        <img src="images/collective-action.jpg" alt="A crowd of people marching in a street protest, embodying the power of collective action and solidarity.">
                    </div>
                    <h2 class="font-serif text-4xl text-white mb-4">The Action</h2>
                    <p class="text-gray-400 mb-6">Solidarity is a verb. Here are tangible, effective ways to support the Palestinian cause, amplify their voices, and hold power accountable.</p>
                    <ul class="space-y-3">
                        <li><a href="https://www.protectpalestine.org/" class="resource-link" target="_blank" rel="noopener noreferrer">Donate: Vetted Aid and Solidarity Funds</a></li>
                        <li><a href="https://www.jewishvoiceforpeace.org/local/" class="resource-link" target="_blank" rel="noopener noreferrer">Find Your Local JVP Chapter</a></li>
                        <li><a href="https://www.nationalsjp.org/" class="resource-link" target="_blank" rel="noopener noreferrer">Connect with Students for Justice in Palestine (SJP)</a></li>
                        <li><a href="https://uscpr.org/take-action/" class="resource-link" target="_blank" rel="noopener noreferrer">Toolkits for Talking to Friends, Family & Representatives</a></li>
                        <li><a href="https://www.palestineportal.org/action-advocacy/support-palestine-fair-trade/" class="resource-link" target="_blank" rel="noopener noreferrer">Support Palestinian Businesses and Artisans</a></li>
                    </ul>
                </div>
            </section>

        </div>
        
        <!-- Footer Section -->
        <footer id="footer" class="text-center py-10 border-t border-gray-800 relative z-10">
            <p class="text-gray-500">From The River To The Sea, Palestine Will Be Free.</p>
            <p class="text-xs text-gray-600 mt-2">fromtheriver.org - A project of solidarity.</p>
        </footer>

    </div>

    <script>
    document.addEventListener('DOMContentLoaded', () => {

        const contentNodes = document.querySelectorAll('.content-node');
        const svgPath = document.getElementById('river-path');
        const header = document.getElementById('header');
        const footer = document.getElementById('footer');

        if (!svgPath || !header || !footer || contentNodes.length === 0) {
            console.error("Essential elements for the interactive map are missing.");
            return;
        }

        // --- Intersection Observer for Content Node Animation ---
        const observer = new IntersectionObserver((entries, observer) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('is-visible');
                    observer.unobserve(entry.target);
                }
            });
        }, {
            root: null,
            threshold: 0.2,
            rootMargin: '0px 0px -50px 0px'
        });

        contentNodes.forEach(node => observer.observe(node));

        // --- SVG Path Drawing & Animation Logic ---
        let pathLength = 0;

        function drawSVGPath() {
            const isMobile = window.innerWidth < 768;
            const pathStartX = window.innerWidth / 2;
            let pathData = `M ${pathStartX} ${header.offsetHeight}`;
            let lastY = header.offsetHeight;
            
            contentNodes.forEach((node, index) => {
                const rect = node.getBoundingClientRect();
                const nodeCenterY = rect.top + window.scrollY + rect.height / 2;
                
                // On desktop, the connection point is the edge of the card. On mobile, it's the center.
                const nodeConnectX = isMobile ? pathStartX : (index % 2 === 0 ? rect.left + rect.width : rect.left);

                // Use a Bezier curve for a smoother, more organic river-like flow
                const controlPointY1 = lastY + (nodeCenterY - lastY) * 0.5;
                const controlPointY2 = nodeCenterY - (nodeCenterY - lastY) * 0.5;
                
                pathData += ` C ${pathStartX} ${controlPointY1}, ${nodeConnectX} ${controlPointY2}, ${nodeConnectX} ${nodeCenterY}`;
                lastY = nodeCenterY;
            });

            const footerTop = footer.getBoundingClientRect().top + window.scrollY;
            pathData += ` L ${pathStartX} ${footerTop}`;
            svgPath.setAttribute('d', pathData);

            pathLength = svgPath.getTotalLength();
            svgPath.style.strokeDasharray = pathLength;
            svgPath.style.strokeDashoffset = pathLength;
            
            // Initial animation update after drawing
            animatePathOnScroll();
        }

        // --- OPTIMIZED SCROLL ANIMATION using requestAnimationFrame ---
        let ticking = false;

        function animatePathOnScroll() {
            if (pathLength <= 0) return; // Guard against running if path isn't drawn

            // Calculate the scroll progress relative to the main content area
            const scrollableHeight = document.documentElement.scrollHeight - window.innerHeight;
            const scrollPercentage = Math.min(1, Math.max(0, window.scrollY / scrollableHeight));
            
            const drawLength = pathLength * scrollPercentage;
            // A multiplier slightly > 1 makes the drawing feel more responsive
            svgPath.style.strokeDashoffset = Math.max(0, pathLength - drawLength * 1.1); 
        }

        document.addEventListener('scroll', () => {
            if (!ticking) {
                window.requestAnimationFrame(() => {
                    animatePathOnScroll();
                    ticking = false;
                });
                ticking = true;
            }
        }, { passive: true });

        // --- Event Listeners ---
        let resizeTimeout;
        window.addEventListener('resize', () => {
            clearTimeout(resizeTimeout);
            resizeTimeout = setTimeout(drawSVGPath, 250);
        });

        // Use a small timeout to ensure layout is stable before initial draw
        setTimeout(drawSVGPath, 100);
    });
    </script>

</body>
</html>
